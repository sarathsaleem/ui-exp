<!DOCTYPE html>
<html lang="en">
<head>
<meta charset=utf-8>
<title>A simple Physics Blob Exp</title>
<script type='text/javascript' src="js/jquery-1.6.2.min.js"></script>
<script type='text/javascript' src="js/js/jquery-ui-1.8.14.custom.min.js"></script>
<script type='text/javascript' src='js/DAT.GUI.min.js'></script>

<style type="text/css">
body{
overflow:hidden;
background: #92d2fc; /* Old browsers */
background: -moz-linear-gradient(top, #92d2fc 0%, #4fb8f9 33%, #0685e5 65%, #1076c9 84%, #1e5799 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#92d2fc), color-stop(33%,#4fb8f9), color-stop(65%,#0685e5), color-stop(84%,#1076c9), color-stop(100%,#1e5799)); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(top, #92d2fc 0%,#4fb8f9 33%,#0685e5 65%,#1076c9 84%,#1e5799 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(top, #92d2fc 0%,#4fb8f9 33%,#0685e5 65%,#1076c9 84%,#1e5799 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(top, #92d2fc 0%,#4fb8f9 33%,#0685e5 65%,#1076c9 84%,#1e5799 100%); /* IE10+ */
background: linear-gradient(top, #92d2fc 0%,#4fb8f9 33%,#0685e5 65%,#1076c9 84%,#1e5799 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#92d2fc', endColorstr='#1e5799',GradientType=0 ); /* IE6-9 */
}
#water{
	position:relative;
}
.circle{
	width:100px;
	height:100px;
	margin:0 auto;
	position:absolute;
	top:100px;
	border-radius:50px;
	margin:-50px 0px 0px -50px;
}
.color1{
	background: #ee3060; /* Old browsers */
	background: -moz-radial-gradient(center, ellipse cover, #ee3060 0%, transparent 10%, transparent  42%, #ee3060 100%); /* FF3.6+ */
	background: -webkit-gradient(radial, center center, 0px, center center, 100%, color-stop(0%,#ee3060), color-stop(10%,transparent), color-stop(42%,transparent), color-stop(100%,#ee3060)); /* Chrome,Safari4+ */
	background: -webkit-radial-gradient(center, ellipse cover, #ee3060 0%,transparent 10%,transparent 42%,#ee3060 100%); /* Chrome10+,Safari5.1+ */
	background: -o-radial-gradient(center, ellipse cover, #ee3060 0%,transparent 10%,transparent 42%,#ee3060 100%); /* Opera 12+ */
	background: -ms-radial-gradient(center, ellipse cover, #ee3060 0%,transparent 10%,transparent 42%,#ee3060 100%); /* IE10+ */
	background: radial-gradient(center, ellipse cover, #ee3060 0%,transparent 10%,transparent 42%,#ee3060 100%); /* W3C */
	filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#ee3060', endColorstr='#ee3060',GradientType=1 ); /* IE6-9 fallback on horizontal gradient */
}
.color2{
	background: #CC1C0D; /* Old browsers */
	background: -moz-radial-gradient(center, ellipse cover, #CC1C0D 0%, transparent 10%, transparent 42%, #CC1C0D 100%); /* FF3.6+ */
	background: -webkit-gradient(radial, center center, 0px, center center, 100%, color-stop(0%,#CC1C0D), color-stop(10%,transparent), color-stop(42%,transparent), color-stop(100%,#CC1C0D)); /* Chrome,Safari4+ */
	background: -webkit-radial-gradient(center, ellipse cover, #CC1C0D 0%,transparent 10%,transparent 42%,#CC1C0D 100%); /* Chrome10+,Safari5.1+ */
	background: -o-radial-gradient(center, ellipse cover, #CC1C0D 0%,transparent 10%,transparent 42%,#CC1C0D 100%); /* Opera 12+ */
	background: -ms-radial-gradient(center, ellipse cover, #CC1C0D 0%,transparent 10%,transparent 42%,#CC1C0D 100%); /* IE10+ */
	background: radial-gradient(center, ellipse cover, #CC1C0D 0%,transparent 10%,transparent 42%,#CC1C0D 100%); /* W3C */
	filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#CC1C0D', endColorstr='#CC1C0D',GradientType=1 ); /* IE6-9 fallback on horizontal gradient */
}
.color3{
	background: #8BEB03; /* Old browsers */
	background: -moz-radial-gradient(center, ellipse cover, #8BEB03 0%, transparent 10%, transparent 42%, #8BEB03 100%); /* FF3.6+ */
	background: -webkit-gradient(radial, center center, 0px, center center, 100%, color-stop(0%,#8BEB03), color-stop(10%,transparent), color-stop(42%,transparent), color-stop(100%,#8BEB03)); /* Chrome,Safari4+ */
	background: -webkit-radial-gradient(center, ellipse cover, #8BEB03 0%,transparent 10%,transparent 42%,#8BEB03 100%); /* Chrome10+,Safari5.1+ */
	background: -o-radial-gradient(center, ellipse cover, #8BEB03 0%,transparent 10%,transparent 42%,#8BEB03 100%); /* Opera 12+ */
	background: -ms-radial-gradient(center, ellipse cover, #8BEB03 0%,transparent 10%,transparent 42%,#8BEB03 100%); /* IE10+ */
	background: radial-gradient(center, ellipse cover, #8BEB03 0%,transparent 10%,transparent 42%,#8BEB03 100%); /* W3C */
	filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#8BEB03', endColorstr='#8BEB03',GradientType=1 ); /* IE6-9 fallback on horizontal gradient */
}
.color4{
	background: #ee3060; /* Old browsers */
	background: -moz-radial-gradient(center, ellipse cover, #ee3060 0%, transparent 10%, transparent 42%, #ee3060 100%); /* FF3.6+ */
	background: -webkit-gradient(radial, center center, 0px, center center, 100%, color-stop(0%,#ee3060), color-stop(10%,transparent), color-stop(42%,transparent), color-stop(100%,#ee3060)); /* Chrome,Safari4+ */
	background: -webkit-radial-gradient(center, ellipse cover, #ee3060 0%,transparent 10%,transparent 42%,#ee3060 100%); /* Chrome10+,Safari5.1+ */
	background: -o-radial-gradient(center, ellipse cover, #ee3060 0%,transparent 10%,transparent 42%,#ee3060 100%); /* Opera 12+ */
	background: -ms-radial-gradient(center, ellipse cover, #ee3060 0%,transparent 10%,transparent 42%,#ee3060 100%); /* IE10+ */
	background: radial-gradient(center, ellipse cover, #ee3060 0%,transparent 10%,transparent 42%,#ee3060 100%); /* W3C */
	filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#ee3060', endColorstr='#ee3060',GradientType=1 ); /* IE6-9 fallback on horizontal gradient */
}
.color5{
	background: #035AE7; /* Old browsers */
	background: -moz-radial-gradient(center, ellipse cover, #035AE7 0%, transparent 10%, transparent 42%, #035AE7 100%); /* FF3.6+ */
	background: -webkit-gradient(radial, center center, 0px, center center, 100%, color-stop(0%,#035AE7), color-stop(10%,transparent), color-stop(42%,transparent), color-stop(100%,#035AE7)); /* Chrome,Safari4+ */
	background: -webkit-radial-gradient(center, ellipse cover, #035AE7 0%,transparent 10%,transparent 42%,#035AE7 100%); /* Chrome10+,Safari5.1+ */
	background: -o-radial-gradient(center, ellipse cover, #035AE7 0%,transparent 10%,transparent 42%,#035AE7 100%); /* Opera 12+ */
	background: -ms-radial-gradient(center, ellipse cover, #035AE7 0%,transparent 10%,transparent 42%,#035AE7 100%); /* IE10+ */
	background: radial-gradient(center, ellipse cover, #035AE7 0%,transparent 10%,transparent 42%,#035AE7 100%); /* W3C */
	filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#035AE7', endColorstr='#035AE7',GradientType=1 ); /* IE6-9 fallback on horizontal gradient */
}
.color6{
	background: #E61D01; /* Old browsers */
	background: -moz-radial-gradient(center, ellipse cover, #E61D01 0%, transparent 10%, transparent 42%, #E61D01 100%); /* FF3.6+ */
	background: -webkit-gradient(radial, center center, 0px, center center, 100%, color-stop(0%,#E61D01), color-stop(10%,transparent), color-stop(42%,transparent), color-stop(100%,#E61D01)); /* Chrome,Safari4+ */
	background: -webkit-radial-gradient(center, ellipse cover, #E61D01 0%,transparent 10%,transparent 42%,#E61D01 100%); /* Chrome10+,Safari5.1+ */
	background: -o-radial-gradient(center, ellipse cover, #E61D01 0%,transparent 10%,transparent 42%,#E61D01 100%); /* Opera 12+ */
	background: -ms-radial-gradient(center, ellipse cover, #E61D01 0%,transparent 10%,transparent 42%,#E61D01 100%); /* IE10+ */
	background: radial-gradient(center, ellipse cover, #E61D01 0%,transparent 10%,transparent 42%,#E61D01 100%); /* W3C */
	filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#E61D01', endColorstr='#E61D01',GradientType=1 ); /* IE6-9 fallback on horizontal gradient */
}
.color7{
	background: #ACA300; /* Old browsers */
	background: -moz-radial-gradient(center, ellipse cover, #ACA300 0%, transparent 10%, transparent 42%, #ACA300 100%); /* FF3.6+ */
	background: -webkit-gradient(radial, center center, 0px, center center, 100%, color-stop(0%,#ACA300), color-stop(10%,transparent), color-stop(42%,transparent), color-stop(100%,#ACA300)); /* Chrome,Safari4+ */
	background: -webkit-radial-gradient(center, ellipse cover, #ACA300 0%,transparent 10%,transparent 42%,#ACA300 100%); /* Chrome10+,Safari5.1+ */
	background: -o-radial-gradient(center, ellipse cover, #ACA300 0%,transparent 10%,transparent 42%,#ACA300 100%); /* Opera 12+ */
	background: -ms-radial-gradient(center, ellipse cover, #ACA300 0%,transparent 10%,transparent 42%,#ACA300 100%); /* IE10+ */
	background: radial-gradient(center, ellipse cover, #ACA300 0%,transparent 10%,transparent 42%,#ACA300 100%); /* W3C */
	filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#ACA300', endColorstr='#ACA300',GradientType=1 ); /* IE6-9 fallback on horizontal gradient */
}

</style>
</head>
<body>
<div id="fps" style="position:absolute;top:0px;right:0px;margin:5px;background:#000;color:#fff;font-weight:bold"></div>
    <div id="water" >
	<!--<div class="circle color1"></div>
	<div class="circle color2" style="left:30px;top:120px"></div>
	<div class="circle color3" style="left:160px;top:220px"></div>
	<div class="circle color4" style="left:390px;top:150px"></div>
	<div class="circle color5" style="left:150px;top:320px"></div>
	<div class="circle color6" style="left:440px;top:450px"></div>
	<div class="circle color7" style="left:340px;top:510px"></div>
	<div class="circle color2" style="left:130px;top:340px"></div>
	<div class="circle color3" style="left:60px;top:90px"></div>
	<div class="circle color4" style="left:190px;top:360px"></div>
	<div class="circle color5" style="left:650px;top:120px"></div>-->
	</div>
</body>
<script type="text/javascript">

var screenX = window.screenX;
var screenY = window.screenY;
var SCREEN_WIDTH = window.innerWidth;
var SCREEN_HEIGHT = window.innerHeight;		
var mouseX = (window.innerWidth - SCREEN_WIDTH);
$('body').css('height',SCREEN_HEIGHT+'px');
var mouseY = (window.innerHeight - SCREEN_HEIGHT);
var mouseIsDown = false;
var mouseDownOffset = { x: 0, y: 0 };

var fps = '';
var fpsData = document.getElementById('fps');
var lastLoop = new Date;
var t0 = Date.now();

var circles = $(".circle");
var w = 100;
var h = 100;
var boundary = { x: 0, y: 0, width: 0, height: 0 };

var gravity = { x: 0, y: 1.2 };
var randomPos = { x: 0, y: 0 };



function Circles()
 {
	this.position = { x: 0, y: 0 };
	this.velocity = { x: 0, y: 0 };
	this.radius = 110;	
	this.dragging = false;
	this.circles = [];
	this.generateCircles = function()
	{
		for(var i=0;i <60;i++)
		{
		var pos = {
			x:Math.floor(Math.random()*SCREEN_WIDTH),
			y:Math.floor(Math.random()*SCREEN_HEIGHT),
			color:"color"+Math.floor(Math.random()*7)
			}	
			this.circles.push(pos);
		}
		
		return this.circles;
	}
}

var myC = new Circles();	
var circles = myC.generateCircles();
var circlesDom ; 
function genereteCDom()
{
	
	for(var i=0;i<circles.length;i++)
	{
		var C = '<div class="circle '+circles[i].color+'" style="left:'+circles[i].x+'px;top:'+circles[i].y+'px"></div>';
		$('#water').append(C);
	}
	circlesDom = $('.circle');
}
	genereteCDom();
		
	document.addEventListener('mousemove', documentMouseMoveHandler, false);
	document.addEventListener('mousedown', documentMouseDownHandler, false);
	windowResizeHandler();

var myC = new Circles();

function render()
{
	var thisLoop = new Date;
	fps = 1000 / (thisLoop - lastLoop);
	lastLoop = thisLoop;

		
	myC.velocity.x = ( ( mouseX ) - myC.position.x ) * 0.03;
	myC.velocity.y = ( (  mouseY  ) - myC.position.y ) * 0.03;
	
	myC.position.x += myC.velocity.x;
	myC.position.y += myC.velocity.y;
	
	myC.position.x = Math.max( Math.min( myC.position.x, boundary.x + boundary.width ), boundary.x );
	myC.position.y = Math.max( Math.min( myC.position.y, boundary.y + boundary.height ), boundary.y );
		
	$("#water").css({'left':(myC.position.x-600)+'px','top':(myC.position.y-400)+'px'})
	
	bubble();	
	
		
}

var random = Math.random()*60;
setInterval(function(){random = Math.random()*60},1000); 
function bubble()
{	
	var t = (Date.now()-t0)/1000;
	var a = Math.max((1-(t%Math.PI))*15,0);
	var width = w+Math.sin(t*15)*a;
	var height = h-Math.sin(t*15-0.1)*a;
	//circlesDom.each(function(){
		//$(this).css('top',(y-Math.abs(Math.sin(t)*100)+h/2)+"px");
		$(circlesDom).eq(random).css('margin',(-height /2)+'px 0 0'+(-width/2)+'px');		
		$(circlesDom).eq(random).css('width',width +"px");
		$(circlesDom).eq(random).css('height',height+"px");
	//	});
	
}


setInterval('render()',30); 


function windowResizeHandler() {
		SCREEN_WIDTH = window.innerWidth;
		SCREEN_HEIGHT = window.innerHeight;
				
		boundary.x = 0;
		boundary.y = 0;
		boundary.width = SCREEN_WIDTH-101;
		boundary.height = SCREEN_HEIGHT-101;
}
function documentMouseDownHandler(event) {
		event.preventDefault();		
		mouseDownOffset.x =  ( event.clientX - (window.innerWidth - SCREEN_WIDTH) * .5 );
		mouseDownOffset.y =  ( event.clientY - (window.innerHeight - SCREEN_HEIGHT) * .5 );				
		mouseIsDown = true;		
	
	}
	
function documentMouseMoveHandler(event) {		
		mouseX = event.clientX - (window.innerWidth - SCREEN_WIDTH) * .5;
		mouseY = event.clientY - (window.innerHeight - SCREEN_HEIGHT) * .5;
}
function  showFPS(){
	
	fpsData.innerHTML=Math.round(fps)
}
setInterval(showFPS, 300 );

	
</script>

</html>
